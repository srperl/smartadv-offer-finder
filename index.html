<script>
  const apiKey = 'patnPgIMAMI9ZXwum.7860eff03b9c59d78ad536532edb41bd347c6900e8f9724681452fd68757097a';
  const baseId = 'app12gesbScGlSR9r';
  const tableName = 'Imported table';

  fetch(`https://api.airtable.com/v0/${baseId}/${tableName}?maxRecords=15&filterByFormula={test subset}=1`, {
    headers: {
      Authorization: `Bearer ${apiKey}`,
    },
  })
    .then(res => res.json())
    .then(data => {
      const container = document.getElementById('offers');
      container.innerHTML = data.records.map(record => {
        const fields = record.fields;
        return `
          <div style="margin-bottom: 1em;">
            <strong>${fields.Name}</strong><br />
            Category: ${fields.Category?.join(', ') || 'N/A'}<br />
            Payout: $${fields.Payout || 'N/A'}<br />
            GEOs: ${fields.Countries?.join(', ') || 'N/A'}<br />
            <a href="${fields['Portal Link']}" target="_blank">Apply Now</a>
          </div>
        `;
      }).join('');
    })
    .catch(err => {
      document.getElementById('offers').innerHTML = "⚠️ Error loading offers.";
      console.error(err);
    });
</script>


